!function(){"use strict";var t,e={992:function(t,e,n){var r=window.wp.blocks,o=window.wp.i18n,c=window.wp.element,i=window.wp.apiFetch,a=n.n(i),u=window.wp.blockEditor,l=window.wp.components,s=window.wp.data;function p(t,e,n,r,o){const c={content:r};e&&(c.token=e,n(!1)),o(!0),t({requestedPrompt:!0}),a()({path:"/coauthor/prompt",method:"POST",data:c}).then((e=>{o(!1);const n=e.prompts[0].text.split(" ");for(let e=0;e<n.length;e++){const r=n.slice(0,e).join(" ");setTimeout((()=>t({content:r})),50*e)}})).catch((e=>{"openai_token_missing"===e.code&&(n(!0),o(!1),t({requestedPrompt:!1}))}))}(0,r.registerBlockType)("coauthor/paragraph",{apiVersion:2,title:(0,o.__)("Coauthor Paragraph","coauthor"),description:(0,o.__)("Automatically generate new paragraphs using your existing content, GPT-3 and robots.","coauthor"),category:"common",icon:"welcome-write-blog",supports:{html:!1},attributes:{content:{type:"string",source:"text"},requestedPrompt:{type:"boolean",default:!1}},transforms:{to:[{type:"block",blocks:["core/paragraph"],transform:t=>{let{content:e}=t;return(0,r.createBlock)("core/paragraph",{content:e})}}]},edit:function(t){let{attributes:e,setAttributes:n}=t;const[r,o]=(0,c.useState)(!1),[i,a]=(0,c.useState)(!1),[f,d]=(0,c.useState)(""),m=(0,s.useSelect)((t=>function(t){const e=t.getBlockInsertionPoint().index-1;return t.getBlocks().slice(0,e).filter((function(t){return t&&t.attributes&&t.attributes.content})).map((function(t){return t.attributes.content.replaceAll("<br>","\n\n")})).join("\n\n")}(t("core/block-editor"))),[]);return(0,c.useEffect)((()=>{e.content||e.requestedPrompt||p(n,!1,o,m,a)}),[]),(0,c.createElement)("div",(0,u.useBlockProps)(),r&&(0,c.createElement)("div",null,(0,c.createElement)(l.TextControl,{label:"Please provide the OpenAI token to continue:",value:f,onChange:t=>d(t)}),(0,c.createElement)(l.Button,{isPrimary:!0,onClick:()=>{p(n,f,o,m,a)}},"Submit")),e.content&&!i&&(0,c.createElement)("div",null,(0,c.createElement)("div",{className:"content"},(0,c.createElement)(c.RawHTML,null,e.content.trim().replaceAll("\n","<br/>")))),i&&(0,c.createElement)("div",{style:{padding:"10px",textAlign:"center"}},(0,c.createElement)(l.Spinner,{style:{height:"calc(4px * 20)",width:"calc(4px * 20)"}})))},save:function(t){let{attributes:e}=t;const n=u.useBlockProps.save();return(0,c.createElement)("div",n,e.content)}})}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var c=n[t]={exports:{}};return e[t](c,c.exports,r),c.exports}r.m=e,t=[],r.O=function(e,n,o,c){if(!n){var i=1/0;for(s=0;s<t.length;s++){n=t[s][0],o=t[s][1],c=t[s][2];for(var a=!0,u=0;u<n.length;u++)(!1&c||i>=c)&&Object.keys(r.O).every((function(t){return r.O[t](n[u])}))?n.splice(u--,1):(a=!1,c<i&&(i=c));if(a){t.splice(s--,1);var l=o();void 0!==l&&(e=l)}}return e}c=c||0;for(var s=t.length;s>0&&t[s-1][2]>c;s--)t[s]=t[s-1];t[s]=[n,o,c]},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={826:0,431:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,c,i=n[0],a=n[1],u=n[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(u)var s=u(r)}for(e&&e(n);l<i.length;l++)c=i[l],r.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return r.O(s)},n=self.webpackChunkcoauthor=self.webpackChunkcoauthor||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var o=r.O(void 0,[431],(function(){return r(992)}));o=r.O(o)}();